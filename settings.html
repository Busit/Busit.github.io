<!DOCTYPE html>
<html>
	<head>
		<title>Busit - Developers</title>
		<meta name="description" content="Busit Developer Portal" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="cache-control" content="no-cache, must-revalidate" /> 
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" /> 
		<link rel="shortcut icon" href="img/favicon.ico" />
		<link rel="stylesheet" href="css/main.css" type="text/css" />
		<script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		
		<link class="codestyle" rel="stylesheet" href="css/github.css">
		<script type="text/javascript" src="js/highlight.pack.js"></script>
	</head>
	<body>
		<div id="footerfix">
			<header>
				<div class="content">
					<div class="logo">
						<a href="//www.busit.com"><img src="img/logo_white.png" alt="logo" /></a>
						<em>Developer Portal</em>
					</div>
			<nav id="navigation">
				<ul id="mainmenu">
					<li><a href="index.html">Home</a></li>
					<li><a href="concepts.html">Learn</a></li>
					<li><a href="settings.html">Think</a></li>
					<li><a href="code.html">Code</a></li>
					<li><a href="publish.html">Publish</a></li>
				</ul>
			</nav>
			
				</div>
			</header>
			<div id="content">
        
			<h1><strong>Think</strong> and define what you want</h1>

<a name="start"><h2 onclick="return; $(this).next().slideToggle(500);">Before we start</h2></a>
<div class="answer">
	<p style="font-size: 1.4em;">You sould be familiar with the <a href="concepts.html">concepts</a> in order to understand the various key points and make educated choices about those.<br /><br /></p>
	<p>Before writing some code, you need to define the properties and the behavior of your connector. You can do so in different manners, either
	manually on your <a href="//www.busit.com/developers/panel">developer panel</a> or by uploading a <a href="//en.wikipedia.org/wiki/JSON">JSON</a> file containing all 
	such parameters ; the latter is the recommended approach and the rest of this document will only provide JSON examples.</p>
	<p>The following main properties are required to cover all aspects of your connector's settings:</p>
<pre><code class="json">
{
	"general": {...},
	"interfaces": [...],
	"configs": [...],
	"translation": {...}
}
</code></pre>
</div>

<a name="pattern"><h2 onclick="return; $(this).next().slideToggle(500);">Choose your <strong>Pattern</strong></h2></a>
<div class="answer">
	<p>Depending on what your connector is doing, you should choose a pattern that will indicate where it can happen in a user flow. You can eventually apply several patterns however this is not recommended unless you are experienced about it.</p>
	<ul>
		<li><strong>Producer</strong>: If you gather data from devices or services that are external to Busit, you are then the 
		first element in a user flow that will trigger the chain by feeding new messages in the system.
			<div style="text-align: center; margin: 20px;">
				<div class="connector"><img src="//images.busit.com/connectors/28.png" /></div>
				<div class="arrow">&#xf061 </div>
			</div>
		</li>
		<li><strong>Consumer</strong>: If you accept incomming data and send it to devices or services that are external to Busit, you are then the last element in a user flow and nothing will happen after.
			<div style="text-align: center; margin: 20px;">
				<div class="arrow">&#xf061 </div>
				<div class="connector"><img src="//images.busit.com/connectors/10.png" /></div>
			</div>
		</li>
		<li><strong>Transformer</strong>: If you accept incomming data, then make eventual modifications, decide to stop the chain or not,
		aggregate or enhance data with other information that can eventually come from external sources, then pass it on to the next connector, 
		then you are an intermediate element in a user flow.
			<div style="text-align: center; margin: 20px;">
				<div class="arrow">&#xf061 </div>
				<div class="connector"><img src="//images.busit.com/connectors/24.png" /></div>
				<div class="arrow">&#xf061 </div>
			</div>
		</li>
	</ul>
	<p>The type of connector will affect the <a href="#interfaces">interfaces</a> you declare.</p>
</div>

<a name="general"><h2 onclick="return; $(this).next().slideToggle(500);"><strong>General</strong> connector settings</h2></a>
<div class="answer">
	<p>The first thing to do is to declare your connector on your <a href="//www.busit.com/developers/panel">developer panel</a> and to give
	it a meaningfull name. Then you can add more information. There are some basic element you should define for every connector:</p>
	<ol>
		<li>The <strong>programming language</strong> used. Currently, only <em>PHP</em> is allowed.</li>
		<li>The <strong>category</strong> in which it will appear in the store. One of <em>Business, Communication, Entertainment, Health,
			Home automation, Industry, News, Productivity, Social, Storage, Technology, Utilities</em>.</li>
		<li>The <strong>buy price</strong> that users will be charged once-for-all for using your connector. This amount will be credited to
			your account.</li>
		<li>The <strong>use price</strong> that users will be charged for every message that is handled by your connector. This amount 
			will be credited to your account.</li>
		<li>The <strong>small logo</strong> as a 100x100 transparent PNG file. It should be 
			<a href="//en.wikipedia.org/wiki/Base64">base64</a>'d in the JSON file.</li>
		<li>The <strong>big logo</strong> as a 300x300 transparent PNG. It should also be 
			<a href="//en.wikipedia.org/wiki/Base64">base64</a>'d in the JSON file.</li>
	</ol>
	<p>For the <em>description</em> of your connector, the visible <em>name</em> and so on, see the <a href="#translation">translation</a> section.</p>
<pre><code class="json">
{
	"general":
	{
		"language": 	"PHP",
		"category": 	"Social",
		"buy_price": 	0,
		"use_price": 	1,
		"small_logo": 	"SGVoZSwgeW91IGRpZCBkZWNvZGUgdGhpcyBhY3R1YWxseSwgeW91J3JlIHNtYXJ0ISBJZiB
				5b3UgY2FuIGZpbmQgKDEpIG15IGZpcnN0IG5hbWUsICgyKSBteSBiaXJ0aCBkYXRlIGFuZCAoMykgbXk
				gZmF2b3VyaXRlIHZhY2F0aW9uIGxvY2F0aW9uLCB0aGVuIG1haWwgdGhvc2UgdG8gbWUgYXQgZG9jX2N
				vbnRlc3RAYnVzaXQuY29tIGFuZCB3ZSdsbCBtYWtlIHVwIHNvbWV0aGluZy4uLiBBbGwgaXMgaW4gdGh
				lIGRvY3VtZW50YXRpb24sICJSVEZNIiB0aGV5IHVzZWQgdG8gc2F5Lg==",
		"big_logo": 	"SGVoZSwgeW91IGRpZCBkZWNvZGUgdGhpcyBhY3R1YWxseSwgeW91J3JlIHNtYXJ0ISBJZiB
				5b3UgY2FuIGZpbmQgKDEpIG15IGZpcnN0IG5hbWUsICgyKSBteSBiaXJ0aCBkYXRlIGFuZCAoMykgbXk
				gZmF2b3VyaXRlIHZhY2F0aW9uIGxvY2F0aW9uLCB0aGVuIG1haWwgdGhvc2UgdG8gbWUgYXQgZG9jX2N
				vbnRlc3RAYnVzaXQuY29tIGFuZCB3ZSdsbCBtYWtlIHVwIHNvbWV0aGluZy4uLiBBbGwgaXMgaW4gdGh
				lIGRvY3VtZW50YXRpb24sICJSVEZNIiB0aGV5IHVzZWQgdG8gc2F5Lg=="
	}
}
</code></pre>
</div>

<a name="interfaces"><h2 onclick="return; $(this).next().slideToggle(500);">List your <strong>Interfaces</strong></h2></a>
<div class="answer">
	<p>After you've declared the <a href="#general">general</a> settings, you should proceed with the input and output 
	<a href="concepts.html#interface">interfaces</a> your connector has. This way, you can give a hint to users about what your connector
	does.<br />The interfaces settings have 6 mandatory parameters:</p>
	<ol>
		<li>The internal <strong>key</strong> which is an internal name that the user will not see (lower case, no spaces, 
			no special characters).</li>
		<li>The <strong>direction</strong> of the interface: <em>input</em> or <em>output</em>.</li>
		<li>The <strong>pattern</strong> in which the interface is involved. An <em>input</em> interface can only be involved in the <em>consumer</em>
			or <em>transformer</em> pattern whereas an <em>output</em> interface can only be involved in the <em>producer</em> or <em>transformer</em> pattern.
		<li>Whether or not this is a <strong>custom</strong> interface.</li>
		<li>Whether or not this is an <strong>automatic</strong> interface. <span style='text-decoration: underline;'>Important</span>: 
			only <em>output</em> interfaces can be automatic !</li>
		<li>Whether or not the interface is <strong>hidden</strong> to the user... Why would it be ? Because then it can be used internally
			for some reason.</li>
		<li>The default <strong>timer</strong> if applicable, <em>null</em> otherwise. The format is : <em>[year]-[month]-[day]-[hour]-[minute]</em> 
			with corresponding numbers or the upper-case letter <em>E</em> (to mean <em>every</em>).<br />
			Example: <pre>E-E-1-10-00</pre> means every 1st of each month at 10:00.<br />
			Note that if you set stupid values such as 32nd of each month, then it will behave stupidly accordingly.<br />
			Note that the minutes should ideally be a multiple of 5.</li>
	</ol>
	<p>For the <em>description</em> of your interfaces, the visible <em>name</em> and so on, see the <a href="#translation">translation</a> section.</p>
	<p>Example: A thermometer device can <a href="concepts.html#pushpull">push</a> data on my connector then I make it available to the user, 
		so my connector is a <em>Producer</em>.<br />
		Because the device will push data, I need an <em>input</em> interface to receive it (and therefore implement the <em>Consumer</em> pattern), 
		but the user shouldn't see it, because it is only available to the device (lets not confuse the user about this).<br />
		Then, I offer an <em>output</em> interface that will send the temperature to whatever the user connects to it... (and therefore implement
		also the <em>Producer</em> pattern)<br ><br />
		<span style="color: #d14;">In red, what happens behind the scenes, the user does not see it.</span><br />
		<span style="color: #00d140;">In green, what the user can use.</span><br />
		</p>
	<div style="text-align: center; margin: 20px;">
		<div class="connector" style="color: #d14;">The device</div>
		<span style="font-size: 0.6em; color: #d14; display: inline-block;">(consume data on the<br /> hidden input interface)</span>
		<div class="arrow" style="color: #d14;">&#xf061 </div>
		<div class="connector" style="color: #00d140;">My connector</div>
		<span style="font-size: 0.6em; color: #00d140; display: inline-block;">(produce data on the<br /> output interface)</span>
		<div class="arrow" style="color: #00d140;">&#xf061 </div>
	</div>
<pre><code class="json">
{
	"interfaces":
	[
		{
			"key": 		"receiver",
			"direction": 	"input",
			"pattern": 	"consumer",
			"custom": 	false,
			"automatic": 	false,
			"timer": 	null,
			"hidden": 	true
		},
		{
			"key": 		"temperature",
			"direction": 	"output",
			"pattern": 	"producer",
			"custom": 	false,
			"automatic": 	false,
			"timer": 	null,
			"hidden": 	false
		}
	]
}
</code></pre>
</div>

<a name="config"><h2 onclick="return; $(this).next().slideToggle(500);">Specify your <strong>configuration</strong> settings</h2></a>
<div class="answer">
	<p>If your connector needs some authentication or some extra parameters in order to work properly, then those are 
		<strong>configuration</strong> parameters that the user will set at the beginning, before using your connector. In short,
		those are just containers for user settings.<br />
		Configuration prameters are composed of only 3 elements:</p>
	<ol>
		<li>An internal <strong>key</strong> which is an internal name that the user will not see (lower case, no spaces, 
			no special characters).</li>
		<li>Whether or not it is <strong>hidden</strong> to the user. (see just below for more info).</li>
		<li>An optionnal <strong>default</strong> value just in case... Combined with a <em>hidden</em> interface, this allows
			to store values for internal usage that the user should not know about.<br />For instance: if my connector should connect
			to a URL to retreive data, it's best not to hardcode the URL in the code, but instead use a hidden configuration parameter
			with the URL as default value such that whenever it changes, it is easy to adjust.</li>
	</ol>
	<p>For the <em>description</em> of your parameters, the visible <em>name</em> and so on, see the <a href="#translation">translation</a> section.</p>
<pre><code class="json">
{
	"configs":
	[
		{
			"key": 		"url",
			"hidden": 	true,
			"default":	"http://example.com"
		},
		{
			"key": 		"something",
			"hidden": 	false,
			"default":	null
		}
	]
}
</code></pre>
	<p>As explained in the <a href="concepts.html#config">concepts</a>, there are 2 ways for the user to fill in the configuration parameters.
		By default, a simple input form is generated so that the user can input any value ; hence, the configurtion parameters should 
		not be hidden. <br />However, with the second option, you can redirect the user to an <a href="#external">external configuration</a> 
		website that you should host and maintain
		unless you have a <em>premium developer account</em> ; then, you have the possibility to provide a nicer way to configure your 
		connector (OAuth,...) and therefore, your configuration parameters are kind of hidden (per-se) to the user.</p>
</div>

<a name="translation"><h2 onclick="return; $(this).next().slideToggle(500);"><strong>Translate</strong> everything</h2></a>
<div class="answer">
	<p>After setting all your different parameters, you now need to make sure they will be understood by everyone with a properly
		translated name, description and more. There is one <strong>mandatory</strong> language that you must support : <strong>
		english</strong>. So that if the user selects a language that is not supported by your connector, we can fallback on
		a common predefined language. Beware that if a translation set is provided but incomplete, there will not be any fallback,
		it will show empty values instead.</p>
	<p>Then, you can add as many translations sets as you need. Here is how it is structured :</p>
	<p>Every translation set should be grouped with the <a href="//en.wikipedia.org/wiki/List_of_ISO_639-1_codes">
		2 letters ISO639-1 language code</a> and should contain be 3 subsections for :</p>
	<ul>
		<li>The <strong>general</strong> settings:
			<ul>
				<li>The displayed friendly <strong>name</strong> of your connector.</li>
				<li>The <strong>description</strong> of your connector.</li>
				<li>An optional special <strong>prevention</strong> message. <a href="//www.bbcode.org/reference.php">BBCode</a> allowed.
					<br />If specified, this will prevent the users from adding this connector from the store. Why is that ? 
					For instance, the iPhone connector will be added automatically when you install the app on your phone. Thus,
					you cannot manually install it from the store.</li>
				<li>An optional external <strong>config url</strong>. <a href="#external">More about external websites</a>.</li>
				<li>An optional external <strong>panel url</strong>. <a href="#external">More about external websites</a>.</li>
				<li>An optional <strong>product url</strong> that redirects to the official device (or service, software,...) 
					that the user must acquire prior to using the connector.</li>
			</ul>
		</li>
		<li>All <strong>interfaces</strong> declared, and for each of them:
			<ul>
				<li>The displayed friendly <strong>name</strong> of your interface.</li>
				<li>The <strong>description</strong> of your interface.</li>
			</ul>
		</li>
		<li>All <strong>configs</strong> declared, and for each of them:
			<ul>
				<li>The displayed friendly <strong>name</strong> of your parameter.</li>
				<li>The <strong>description</strong> of your parameter.</li>
			</ul>
		</li>
	</ul>
<pre><code class="json">
{
	"translation":
	{
		"en":
		{
			"general": 
			{
				"name": 	"My Connector",
				"description": 	"This is a test connector, and so on...",
				"prevention": 	null,
				"config_url": 	null,
				"panel_url": 	"http://example.com/?{INSTANCE}",
				"product_url": 	null
			},
			"interfaces": 
			{
				"temperature":
				{
					"name": 	"The Outdoor Temperature",
					"description": 	"The outdoor temperature in celcius degrees is gathered every 5 min"
				},
				"pressure": {...}
			},
			"configs": 
			{
				"something":
				{
					"name": 	"Anything Here",
					"description": 	"Type in anyhing hoping it'll do something"
				},
				"another_thing": {...}
			}
		},
		"fr": {...}
	}
}
</code></pre>
</div>

<a name="external"><h2 onclick="return; $(this).next().slideToggle(500);">About <strong>external</strong> websites</h2></a>
<div class="answer">
	... to be continued ...
</div>

<script>hljs.initHighlightingOnLoad();</script>
<script>createShortcutMenu();</script>
			</div>
		</div>
		<footer>
			<div class="social">
				<a class="link" href="//twitter.com/Bus_IT">
					<img src="//images.busit.com/social//twitter.png" alt="Twitter" />
				</a>
				<a class="link" href="//www.facebook.com/busit.net">
					<img src="//images.busit.com/social//facebook.png" alt="Facebook" />
				</a>
				<a class="link" href="//plus.google.com/+BusitFr" rel="publisher">
					<img src="//images.busit.com/social//google.png" alt="Google+" />
				</a>
				<a class="link" href="//www.linkedin.com/company/5121205">
					<img src="//images.busit.com/social//linkedin.png" alt="LinkedIn" />
				</a>
				<a class="link" href="//www.youtube.com/channel/UCvB9PQcyRzdf8n4AewdE_oA">
					<img src="//images.busit.com/social//youtube.png" alt="YouTube" />
				</a>
			</div>
			<div class="copyright">&copy; <a href='//www.busit.com'>Busit</a> | 
			<a style='font-weight: bold;' href='//www.sys.as'>SYS Network</a></div>
		</footer>
		<div id="help">
			Is something unclear, you've spotted a mistake, or you need more details ?<br /><br />
			Then please help us <a href="//github.com/Busit/Busit.github.io/issues/new">improve this doc</a>.<br />
			Or <a href="//www.busit.com/about/contact">contact us</a> directly.
		</div>
	</body>
</html>